  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Editor - Rutwik Video Editor</title>
  <link rel="stylesheet" href="/rve/style.css"/>
</head>
<body>

  <!-- Top Navigation Bar -->
  <nav class="editor-nav glass">
    <div class="nav-left">
  <a href="/rve/dashboard.html" id="logo-link">
    <img src="/rve/assets/rve-logo.png" alt="RVE Logo" class="rve-logo" />
  </a>
  <span class="rve-title">RVE</span>
</div>
    <div class="nav-center">
      <input type="text" id="project-title-input" placeholder="Project File Name" />
    </div>
    <div class="nav-right">
      <button class="button">Download</button>
      <button class="button">Share</button>
      <button class="button">Next</button>
    </div>
  </nav>

  <!-- Media Preview Zone -->
<section class="media-preview glass">
    <input type="file" id="video-upload" accept="video/*" multiple /> 
    
    <label for="video-upload" class="button" id="upload-label">Upload Video</label>
  
    <video id="video-preview" controls></video>
</section>

  <!-- Project Info & Save -->
  <main class="glass editor-content">
    <h2 id="project-title">Loading Project...</h2>
    <input type="text" id="title-input" placeholder="Project Title" />
    <button class="button" id="save-btn">Save Project</button>
  </main>

  <!-- Editor Logic -->
  <script type="module">
    window.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const projectId = urlParams.get("id");

      if (!projectId) {
        document.getElementById("project-title").textContent = "No project ID found.";
        return;
      }

      const project = {
        id: projectId,
        title: "Untitled Project",
        createdAt: new Date().toISOString(),
        lastEdited: new Date().toISOString()
      };

      document.getElementById("project-title").textContent = `Editing: ${project.title}`;
      document.getElementById("title-input").value = project.title;

      document.getElementById("save-btn").addEventListener("click", () => {
  const newTitle = document.getElementById("title-input").value;
  project.title = newTitle;
  project.lastEdited = new Date().toISOString();

  // Update header
  document.getElementById("project-title").textContent = `Editing: ${newTitle}`;

  //Update <title> tag
  document.title = `${newTitle} - Rutwik Video Editor`;

  console.log("Project saved locally:", project);
  alert("Project saved locally!");
});

// --- Video Upload Logic (Clean Fix) ---
const videoUpload = document.getElementById("video-upload");
const videoPreview = document.getElementById("video-preview");
const uploadBtn = document.getElementById("upload-btn");


    // 2. Change Handler (Handles the files once selected)
    videoUpload.addEventListener("change", () => {
        const files = Array.from(videoUpload.files);
        if (files.length === 0) {
            console.warn("No files selected");
            return;
        }

        // Preview the first clip
        const firstFile = files[0];
        const firstURL = URL.createObjectURL(firstFile);
        videoPreview.src = firstURL;
        videoPreview.load();

        // Log all clips for future timeline use
        files.forEach((file, index) => {
            const url = URL.createObjectURL(file);
            console.log(`Clip ${index + 1}: ${file.name}, URL: ${url}`);
            // Future: push to timeline array
        });
    });
} else {
    // for error messages
    console.error("CRITICAL UPLOAD ERROR: One or more required elements were not found. Error code x00003");
    console.log("Error Code: x00003, please check https://rutwik-stuff.github.io/rve/error-codes.html for more details.");
}
// --- End Video Upload Logic ---
  </script>

  <!-- for progress bar at the bottom -->
  <footer class="progress-footer glass">
  <div class="progress-bar">
    <div class="progress-step active" data-step="Import">Import</div>
    <div class="progress-step" data-step="Edit">Edit</div>
    <div class="progress-step" data-step="Music">Music</div>
    <div class="progress-step" data-step="Final Checks">Final Checks</div>
    <div class="progress-step" data-step="Export">Export</div>
    <div class="progress-step" data-step="Upload">Upload</div>
  </div>
</footer>
  
</body>
</html>
